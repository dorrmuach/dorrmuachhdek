<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 4th Anniversary | 18.02.2026</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Space+Grotesk:wght@300;400;600&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: '#FFD700',
                        dark: '#050505',
                        glass: 'rgba(255, 255, 255, 0.05)'
                    },
                    fontFamily: {
                        serif: ['"Cinzel"', 'serif'],
                        mono: ['"Space Grotesk"', 'sans-serif'],
                        script: ['"Dancing Script"', 'cursive'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { margin: 0; overflow-x: hidden; background-color: #000; color: white; }
        
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }

        .glass-panel {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }

        /* Sembunyikan konten celebration secara default */
        #celebration-content { display: none; opacity: 0; }
        
        /* Tombol Start Overlay */
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; cursor: pointer;
        }

        .photo-card {
            transition: transform 0.5s ease;
        }
        .photo-card:hover {
            transform: scale(1.02);
            z-index: 10;
        }
    </style>
</head>
<body class="antialiased">

    <audio id="bg-music" loop>
        <source src="lagu.mp3" type="audio/mpeg">
    </audio>

    <div id="start-overlay">
        <div class="animate-pulse text-center px-4">
            <p class="text-gold font-serif text-2xl mb-2">IV YEARS ANNIVERSARY</p>
            <p class="text-gray-400 text-sm font-mono tracking-widest">[ TAP ANYWHERE TO OPEN ]</p>
        </div>
    </div>

    <div id="canvas-container"></div>

    <section id="countdown-section" class="min-h-screen flex flex-col items-center justify-center px-4 text-center relative z-10 transition-opacity duration-1000">
        <div class="mb-12 space-y-4">
            <p class="text-gold tracking-[0.5em] text-xs md:text-sm uppercase font-mono">The Countdown Begins</p>
            <h1 class="text-5xl md:text-8xl font-serif font-bold text-white leading-tight">
                WAIT FOR <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 to-yellow-600">IT</span>
            </h1>
            <p class="text-gray-400 font-mono text-sm">Menuju 18 Februari 2026</p>
        </div>

        <div class="grid grid-cols-4 gap-3 md:gap-8 mb-16 max-w-2xl w-full">
            <div class="glass-panel p-4 rounded-lg"><span id="days" class="text-3xl md:text-5xl font-mono block">00</span><span class="text-[10px] text-gold uppercase">Days</span></div>
            <div class="glass-panel p-4 rounded-lg"><span id="hours" class="text-3xl md:text-5xl font-mono block">00</span><span class="text-[10px] text-gold uppercase">Hours</span></div>
            <div class="glass-panel p-4 rounded-lg"><span id="minutes" class="text-3xl md:text-5xl font-mono block">00</span><span class="text-[10px] text-gold uppercase">Mins</span></div>
            <div class="glass-panel p-4 rounded-lg border-gold"><span id="seconds" class="text-3xl md:text-5xl font-mono block text-gold animate-pulse">00</span><span class="text-[10px] text-gold uppercase">Secs</span></div>
        </div>
    </section>

    <section id="celebration-content" class="relative z-20 pb-20">
        
        <div class="min-h-screen flex flex-col justify-center items-center text-center px-4">
            <p class="font-script text-4xl md:text-6xl text-gold mb-4 animate-float">Happy Anniversary</p>
            <h1 class="text-6xl md:text-9xl font-serif font-bold text-white mb-6">4 TAHUN</h1>
            <p class="max-w-xl text-gray-300 font-mono text-sm md:text-base leading-relaxed glass-panel p-6 rounded-xl">
                "Waktu berlalu, tapi perasaanku tetap sama. Terima kasih telah menjadi bagian terbaik dari setiap hariku selama 1.461 hari ini. I Love You."
            </p>
            <div class="mt-10 animate-bounce">
                <p class="text-xs text-gold tracking-widest">SCROLL DOWN FOR MEMORIES</p>
                <svg class="w-6 h-6 mx-auto mt-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7-7-7"></path></svg>
            </div>
        </div>

        <div class="max-w-6xl mx-auto px-4 py-20">
            <h2 class="text-3xl font-serif text-center mb-12 text-gold"><span class="border-b border-gold pb-2">Our Journey</span></h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-auto">
                <div class="photo-card glass-panel p-2 rounded-xl">
                    <img src="Fotogaleri.webph" class="w-full h-80 object-cover rounded-lg filter sepia-[0.3]" alt="Kenangan 1">
                    <p class="text-center font-script text-xl mt-4 text-gold">Awal Cerita</p>
                </div>

                <div class="photo-card glass-panel p-2 rounded-xl md:col-span-2">
                    <img src="Fotogaleri2.jpg" class="w-full h-80 object-cover rounded-lg filter contrast-125" alt="Kenangan 2">
                    <p class="text-center font-script text-xl mt-4 text-gold">Momen Terbaik</p>
                </div>

                <div class="photo-card glass-panel p-2 rounded-xl">
                    <img src="Fotogaleri3.jpg" class="w-full h-80 object-cover rounded-lg" alt="Kenangan 3">
                    <p class="text-center font-script text-xl mt-4 text-gold">Traveling</p>
                </div>

                <div class="photo-card glass-panel p-2 rounded-xl">
                    <img src="Fotogaleri4.jpg" class="w-full h-80 object-cover rounded-lg" alt="Kenangan 4">
                    <p class="text-center font-script text-xl mt-4 text-gold">Suka & Duka</p>
                </div>

                <div class="photo-card glass-panel p-8 rounded-xl flex items-center justify-center bg-gold/10">
                    <div class="text-center">
                        <h3 class="text-4xl font-serif text-white mb-2">4</h3>
                        <p class="font-mono text-xs uppercase tracking-widest">Years & Counting</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-2xl mx-auto px-4 pb-20">
            <div class="glass-panel p-8 rounded-xl text-center">
                <h3 class="font-serif text-2xl text-gold mb-6">Make a Wish</h3>
                <form id="wishForm" class="space-y-4">
                    <input type="text" id="wishName" placeholder="Nama Kamu" class="w-full bg-black/50 border border-gold/30 rounded p-3 text-white focus:outline-none focus:border-gold" required>
                    <textarea id="wishMessage" placeholder="Harapan untuk tahun depan..." class="w-full bg-black/50 border border-gold/30 rounded p-3 text-white focus:outline-none focus:border-gold h-32" required></textarea>
                    <button type="submit" class="w-full bg-gold text-black font-bold py-3 rounded hover:bg-yellow-500 transition">KIRIM HARAPAN</button>
                </form>
                <div id="wishesContainer" class="mt-8 text-left space-y-4 max-h-60 overflow-y-auto"></div>
            </div>
        </div>
    </section>

<script>
        // --- 1. SETUP TANGGAL & AUDIO ---
        const targetDate = new Date('2026-02-18T00:00:00').getTime(); 
        const music = document.getElementById('bg-music');
        let isUnlocked = false;

        // --- 2. INTERAKSI AWAL (KLIK TAP ANYWHERE) ---
        const overlay = document.getElementById('start-overlay');
        
        overlay.addEventListener('click', function() {
            // Hilangkan overlay
            overlay.style.transition = "opacity 0.5s";
            overlay.style.opacity = '0';
            
            setTimeout(() => { 
                overlay.style.display = 'none'; 
            }, 500);
            
            // Mainkan Musik
            music.play().then(() => {
                // Musik jalan
            }).catch(e => {
                console.log("Audio perlu interaksi user lagi atau error: ", e);
            });
        });

        // --- 3. COUNTDOWN LOGIC ---
        const timer = setInterval(() => {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance < 0) {
                clearInterval(timer);
                unlockCelebration();
            } else {
                const d = Math.floor(distance / (1000 * 60 * 60 * 24));
                const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = d < 10 ? '0'+d : d;
                document.getElementById('hours').innerText = h < 10 ? '0'+h : h;
                document.getElementById('minutes').innerText = m < 10 ? '0'+m : m;
                document.getElementById('seconds').innerText = s < 10 ? '0'+s : s;
            }
        }, 1000);

        // --- 4. FUNGSI UNLOCK CELEBRATION ---
        function unlockCelebration() {
            if(isUnlocked) return;
            isUnlocked = true;

            const cdSection = document.getElementById('countdown-section');
            const celebSection = document.getElementById('celebration-content');

            // Gunakan GSAP jika terload, jika tidak pakai vanilla JS
            if (typeof gsap !== 'undefined') {
                gsap.to(cdSection, { opacity: 0, duration: 1, onComplete: () => {
                    cdSection.style.display = 'none';
                    celebSection.style.display = 'block';
                    celebSection.style.opacity = '0';
                    gsap.to(celebSection, { opacity: 1, duration: 2 });
                    triggerConfetti();
                }});
            } else {
                cdSection.style.display = 'none';
                celebSection.style.display = 'block';
                celebSection.style.opacity = '1';
                triggerConfetti();
            }
        }

        // --- 5. EFEK CONFETTI ---
        function triggerConfetti() {
            // Cek jika library confetti terload
            if (typeof confetti === 'undefined') return;

            var duration = 5 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) { return clearInterval(interval); }
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random()*0.2 + 0.1, y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random()*0.2 + 0.7, y: Math.random() - 0.2 } }));
            }, 250);
        }

        // --- 6. THREE.JS BACKGROUND ---
        if (typeof THREE !== 'undefined') {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            const container = document.getElementById('canvas-container');
            if(container) container.appendChild(renderer.domElement);

            const geometry = new THREE.BufferGeometry();
            const count = 1500;
            const pos = new Float32Array(count * 3);
            for(let i=0; i<count*3; i++) pos[i] = (Math.random()-0.5)*15;
            geometry.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const material = new THREE.PointsMaterial({ size: 0.02, color: 0xFFD700 });
            const mesh = new THREE.Points(geometry, material);
            scene.add(mesh);
            camera.position.z = 5;

            function animate3D() {
                requestAnimationFrame(animate3D);
                mesh.rotation.y += 0.001;
                mesh.rotation.x += 0.0005;
                renderer.render(scene, camera);
            }
            animate3D();
        }
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB2bOnERp9Rgp-oXtPH7kEuijRDHhvUXuY",
            authDomain: "hbdd-a402d.firebaseapp.com",
            projectId: "hbdd-a402d",
            storageBucket: "hbdd-a402d.firebasestorage.app",
            messagingSenderId: "1021216702327",
            appId: "1:1021216702327:web:1b1b13a6c2eb0355caab72",
            measurementId: "G-L2K7HHQJTZ"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const wishesCol = collection(db, "wishes-final");
        
        // Logic Form Wish
        const wishForm = document.getElementById('wishForm');
        if (wishForm) {
            wishForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('wishName').value;
                const msg = document.getElementById('wishMessage').value;
                
                try {
                    await addDoc(wishesCol, { name, message: msg, timestamp: serverTimestamp() });
                    wishForm.reset();
                    alert("Harapan terkirim! Terima kasih.");
                } catch (err) {
                    console.error("Error sending wish: ", err);
                    alert("Gagal mengirim harapan. Cek koneksi internet.");
                }
            });
        }

        // Logic Load Wishes
        const wishesContainer = document.getElementById('wishesContainer');
        if (wishesContainer) {
            onSnapshot(query(wishesCol, orderBy("timestamp", "desc")), (snap) => {
                wishesContainer.innerHTML = "";
                snap.forEach(doc => {
                    const d = doc.data();
                    const safeName = d.name || "Anonim";
                    const safeMsg = d.message || "";
                    wishesContainer.innerHTML += `<div class="border-b border-gray-700 pb-2 mb-2"><strong class="text-gold">${safeName}</strong>: <span class="text-gray-300 text-sm">${safeMsg}</span></div>`;
                });
            });
        }
    </script>
</body>
</html>
